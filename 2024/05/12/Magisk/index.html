<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>future的个人空间</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="简介 什么是Magisk  的肌肤  Magisk的原理  Magisk修补Ramdisk文件中的init进程    #补充 在ramdisk中注入bootstrap进程，它会在启动时初始化magisk环境，随后拉起init进程，手机启动  #补充 内核版本-安卓13.5.x.x以上的机型，ramdisk移到init_boot分区。   &#96;&#96;刷机千万条，数据第一条。在刷机之前强烈建">
<meta property="og:type" content="article">
<meta property="og:title" content="future的个人空间">
<meta property="og:url" content="http://example.com/2024/05/12/Magisk/index.html">
<meta property="og:site_name" content="future的个人空间">
<meta property="og:description" content="简介 什么是Magisk  的肌肤  Magisk的原理  Magisk修补Ramdisk文件中的init进程    #补充 在ramdisk中注入bootstrap进程，它会在启动时初始化magisk环境，随后拉起init进程，手机启动  #补充 内核版本-安卓13.5.x.x以上的机型，ramdisk移到init_boot分区。   &#96;&#96;刷机千万条，数据第一条。在刷机之前强烈建">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.magiskcn.com/wp-content/uploads/2024/01/19bfce39a8275b1.jpg">
<meta property="og:image" content="https://cdn.magiskcn.com/wp-content/uploads/2024/03/0e84138dbf0fa5c.png">
<meta property="og:image" content="https://cdn.magiskcn.com/wp-content/uploads/2024/01/6d3259ecbbccbd9.png">
<meta property="og:image" content="https://cdn.magiskcn.com/wp-content/uploads/2024/01/808eac2afd92a6a.jpg">
<meta property="article:published_time" content="2024-05-11T16:00:00.000Z">
<meta property="article:modified_time" content="2024-06-21T05:28:54.411Z">
<meta property="article:author" content="永">
<meta property="article:tag" content="adb">
<meta property="article:tag" content="刷机">
<meta property="article:tag" content="root">
<meta property="article:tag" content="Magisk">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.magiskcn.com/wp-content/uploads/2024/01/19bfce39a8275b1.jpg">
  
    <link rel="alternate" href="/atom.xml" title="future的个人空间" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">future的个人空间</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Magisk" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/05/12/Magisk/" class="article-date">
  <time class="dt-published" datetime="2024-05-11T16:00:00.000Z" itemprop="datePublished">2024-05-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><ul>
<li><p>什么是Magisk</p>
</li>
<li><p>的肌肤</p>
</li>
<li><p>Magisk的原理</p>
<ul>
<li>Magisk修补<code>Ramdisk</code>文件中的init进程</li>
</ul>
<p>  #补充 在ramdisk中注入bootstrap进程，它会在启动时初始化magisk环境，随后拉起init进程，手机启动<br>  #补充 内核版本-安卓13.5.x.x以上的机型，ramdisk移到init_boot分区。</p>
</li>
</ul>
<p>&#96;&#96;刷机千万条，数据第一条。在刷机之前强烈建议你进行数据备份，防止手机变砖后数据丢失！！！</p>
<p><code>提前开启USB调试模式 </code>备份官方包的boot.mg   init_boot.img文件<br>&#96;&#96;备好线刷包，变砖直接线刷</p>
<p>1、小米解锁 <strong>Bootloader</strong>：<a target="_blank" rel="noopener" href="https://magiskcn.com/xiaomi-unlock">Xiaomi-unlock</a>  </p>
<p>2、下载系统包：<a target="_blank" rel="noopener" href="https://magiskcn.com/rom">rom</a>（一定要下载和手机系统版本一致的系统包）</p>
<p>3、提取 <strong>boot.img</strong> ：<a target="_blank" rel="noopener" href="https://magiskcn.com/payload-dumper-go-boot">payload-dumper-go-boot</a>（如果系统包有 <strong>boot.img</strong>，可以跳过此步骤）<br>#补充 <a target="_blank" rel="noopener" href="https://dumper.pedroz.eu.org/">在线提取刷机包</a><br>#补充    <code>线刷包：解压后，在images文件夹找到(init_)boot.img</code><br>        &#96;卡刷包：解压后，找到payload.bin，通过上述工具或MT管理器获取(init_)boot.img</p>
<p>4、手机插电脑，文件传输模式，复制 <strong>boot.img</strong> 到手机 <strong>Download</strong> 目录</p>
<p>5、手机下载 <strong>Magisk</strong> APP 安装：<a target="_blank" rel="noopener" href="https://magiskcn.com/magisk-download">Magisk-download</a></p>
<p>6、打开Magisk，①：安装 – ②：选择(init_)boot.img– ③：开始修补文件 – ④：修补完成（修补生成 magisk_patched-xxx.img 文件在 Download 目录）</p>
<p><img src="https://cdn.magiskcn.com/wp-content/uploads/2024/01/19bfce39a8275b1.jpg" alt="Magisk安装教程插图" title="Magisk安装教程插图"></p>
<p>7、电脑下载 <strong>adb-fastboot</strong>：<a target="_blank" rel="noopener" href="https://mrzzoxo.lanzoui.com/b02plghuh">蓝奏盘</a>（解压出来）</p>
<p>8、手机插电脑，打开 文件传输 模式，打开 <strong>Download</strong> 目录，把 <strong>magisk.img</strong> 复制到电脑 <strong>adb-fastboot</strong> 目录</p>
<p><img src="https://cdn.magiskcn.com/wp-content/uploads/2024/03/0e84138dbf0fa5c.png" alt="Magisk安装教程插图1" title="Magisk安装教程插图1"></p>
<p>9、区分两种分区不同的进入方式。</p>
<ul>
<li>boot分区：手机进入 <code>Bootloader</code> 模式，再插入电脑<ul>
<li>&#96;&#96;adb reboot bootloader</li>
<li>&#96;&#96;手机关机，电源键+音量下键</li>
</ul>
</li>
<li>init_boot分区：手机进入 <code>Fastbootd</code> 模式<ul>
<li>&#96;&#96;adb reboot fastboot</li>
</ul>
</li>
</ul>
<p>#注意 &#96;&#96;如果你已获取过root权限或修改过内核，请执行以下操作，否则跳过以下操作。<br>    因为设备的内核已被修改，因此在继续操作之前，需要刷回原厂boot。系统包解包后将boot.img移至和adb工具同一个文件夹（注意是boot.img，即使是init_boot分区的手机也是boot.img）。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">临时启动：fastboot boot boot.img  #测试img是否可用，手机正常重启，说明boot可安全刷入</span><br><span class="line"></span><br><span class="line">单设备：fastboot flash (init_)boot boot.img</span><br><span class="line">多设备：fastboot -s 设备码  flash (init_)boot boot.img</span><br></pre></td></tr></table></figure>



<p>10、打开“<strong>打开CMD命令行.bat</strong>”，输入下面的命令<br>magisk.img每次修补的名字都不一样，使用的时候请更改为(init_)boot.img，避免bug。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">临时启动：fastboot boot 修补文件名 #测试img是否可用，手机正常重启，说明boot可安全刷入</span><br><span class="line"></span><br><span class="line">单设备：fastboot flash (init_)boot 修补文件名</span><br><span class="line">多设备：fastboot -s 设备码  flash (init_)boot 修补文件名</span><br><span class="line"></span><br><span class="line">fastboot flash (init_)boot_ab 修补文件名 #该命令可能需在fastbootd模式下执行</span><br></pre></td></tr></table></figure>

<p>11、显示下面这三行代码，就是成功刷入了。再使用指令 <code>fastboot reboot</code> 重启手机。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Sending &#x27;boot_b&#x27; (196608 KB) OKAY [ 4.697s]</span><br><span class="line">Writing &#x27;boot_b&#x27;             OKAY [ 0.512s]</span><br><span class="line">Finished. Total time: 5.235s</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.magiskcn.com/wp-content/uploads/2024/01/6d3259ecbbccbd9.png" alt="Magisk安装教程插图3" title="Magisk安装教程插图3"></p>
<p>12、重启手机（开机有震动基本没问题了）耐心等手机开机。（显示Magisk的版本，就是刷好了的）</p>
<p><img src="https://cdn.magiskcn.com/wp-content/uploads/2024/01/808eac2afd92a6a.jpg" alt="Magisk安装教程插图4" title="Magisk安装教程插图4"></p>
<p>#提示 :<br>    如果刷入 <strong>magisk.img</strong> 不能开机，可以把前面提取的 <strong>(init_)boot.img</strong> 通过 <strong>fastboot</strong> 刷回去，恢复原 <strong>(init_)boot.img</strong>，一般都能正常开机！<br>    <strong>(init_)boot.img</strong> 保留一份在电脑，避免出问题了可以自救下！</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">临时启动：fastboot boot boot.img #测试img是否可用，手机正常重启，说明boot可安全刷入</span><br><span class="line"></span><br><span class="line">单设备：fastboot flash (init_)boot boot.img</span><br><span class="line">多设备：fastboot -s 设备码  flash (init_)boot boot.img</span><br><span class="line"></span><br><span class="line">fastboot flash (init_)boot_ab 修补文件名  #该命令可能需在fastbootd模式下执行</span><br></pre></td></tr></table></figure>
<p>#补充 注意刷入的boot分区,<code>a</code>或<code>b</code>,电脑ADB刷入不需要在意分区问题，会自动匹配对应分区。<br>#补充 注意使用adb时，单设备和多设备命令不一样。[[..&#x2F;..&#x2F;adb超级教程#为命令指定目标设备|详情参考]]</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/05/12/Magisk/" data-id="clxpqyn9k0000j8tq79kl90tp" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Magisk/" rel="tag">Magisk</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/adb/" rel="tag">adb</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/root/" rel="tag">root</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%88%B7%E6%9C%BA/" rel="tag">刷机</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2040/05/12/hello-world/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Apatch/" rel="tag">Apatch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Magisk/" rel="tag">Magisk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/adb/" rel="tag">adb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/root/" rel="tag">root</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E6%9C%BA/" rel="tag">刷机</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Apatch/" style="font-size: 10px;">Apatch</a> <a href="/tags/Magisk/" style="font-size: 10px;">Magisk</a> <a href="/tags/adb/" style="font-size: 20px;">adb</a> <a href="/tags/root/" style="font-size: 20px;">root</a> <a href="/tags/%E5%88%B7%E6%9C%BA/" style="font-size: 20px;">刷机</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2040/05/">May 2040</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">May 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2040/05/12/hello-world/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/05/12/Magisk/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 永<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>